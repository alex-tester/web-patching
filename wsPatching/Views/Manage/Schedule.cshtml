@model wsPatching.Models.DatabaseModels.ServerObject
@{

    ViewData["Title"] = "Manage Schedule";
    Layout = "~/Views/Shared/_ManageLayout.cshtml";
    bool serverHasSchedule = ViewBag.serverHasSchedule;
}



<div class="bg-body-light">
    <div class="content content-full">
        <div class="d-flex flex-column flex-sm-row justify-content-sm-between align-items-sm-center">
            <h1 class="flex-sm-fill h3 my-2" id="div_StatusTitle">
                Patching Automation <small id="div_StatusDescription" class="d-block d-sm-inline-block mt-2 mt-sm-0 font-size-base font-w400 text-muted"> </small>
            </h1>

            <ol class="breadcrumb breadcrumb-alt">
                <li class="breadcrumb-item">
                    <a class="link-fx" href="@Url.Action("Index", "Home")">Home</a>
                </li>


            </ol>


        </div>
        <div class="form-group form-row">

        </div>
    </div>
</div>


        </div>
<div id="pageBody">

</div>


<script type="text/javascript">
    jQuery(function ($) {
        //highlightNavMenu("Manage");
        $("#div_PageNameHeader").html("Manage Patching");
        $('#nav_systemstatusparent').addClass('open');

        if (@Model.Id == 0) {

            //ShowPopUpEditorDynamic('_ServerPatchingEditor','Manage','0','Create New Schedule', 'ProcessServerPatching', 'Manage', '_ScheduleDetails', 'Manage', true, 'new');
            ShowPopUpEditorDynamicWithViewReload('_ServerPatchingEditor','Manage','0','Create New Schedule', 'ProcessServerPatching', 'Manage', 'Schedule', 'Manage', true, 'new', true);

        }
        else {
            //server has patch schedule... all good
            if ("@serverHasSchedule.ToString().ToLower()" == "true") {
                LoadPageBody("_ScheduleDetails", "Manage", true, @Model.Id);
            }
            else {
                ShowPopUpEditorDynamic('_ServerPatchingCreator','Manage','@Model.Id','Create New Schedule', 'ProcessServerPatching', 'Manage', 'Schedule', 'Manage', true, '@Model.Hostname');
            }
        }
    });



</script>
